Rất thực tế – các lỗi này rất hay gặp trong môi trường dev DApp hiện đại, đặc biệt khi frontend (Vite + React) gọi backend (Replit, Express) qua domain lạ/host dev hoặc khi deploy trên cloud, hoặc thiết lập chưa mở CORS và allowedHosts.

Dưới đây là **nguyên nhân và cách khắc phục chi tiết** cho từng lỗi:

---

## **1. Lỗi: Blocked request. This host ("...pike.replit.dev") is not allowed.**

### **Nguyên nhân:**

* Vite (hoặc framework frontend khác) giới hạn các host được phép truy cập ứng dụng (hot reload dev server, API proxy, v.v.)
* Cấu hình `server.allowedHosts` trong `vite.config.js` **chưa cho phép domain backend bạn dùng**.

### **Cách khắc phục:**

**Thêm domain backend vào `vite.config.js`:**

```js
// vite.config.js
export default defineConfig({
  // ...các config khác,
  server: {
    allowedHosts: [
      'localhost',
      '127.0.0.1',
      'e7991d75-5935-4129-a804-13e5d957325f-00-61mb5t03trec.pike.replit.dev', // Thêm dòng này!
    ],
    // nếu bạn dùng proxy, nhớ config luôn proxy ở đây
  },
});
```

* Khởi động lại server sau khi sửa.

**Lưu ý:**

* Nếu dùng nhiều domain dev, cứ thêm vào allowedHosts.
* Nếu dùng docker hoặc cloud IDE (Replit, Codesandbox, v.v.), luôn cần update allowedHosts mỗi khi có domain mới sinh ra.

---

## **2. Lỗi: `{"error": "Route not found"}`**

### **Nguyên nhân:**

* Frontend gọi sai endpoint hoặc backend chưa khai báo route đó.
* Có thể do nhầm base URL hoặc thiếu `/api` prefix (tùy backend setup).

### **Cách khắc phục:**

* Đảm bảo backend đã khai báo đúng route (GET/POST) và đúng path.
* Kiểm tra lại **URL bạn gọi từ frontend** (thường đặt ở file `.env` hoặc config).
* Nếu dùng proxy (Vite proxy) thì config chuẩn lại.

**Ví dụ**
Nếu backend chạy trên:

```
https://e7991d75-5935-4129-a804-13e5d957325f-00-61mb5t03trec.pike.replit.dev
```

Và bạn gọi `/user/0x1234/nfts`, thì fetch phải là:

```js
fetch("https://e7991d75-5935-4129-a804-13e5d957325f-00-61mb5t03trec.pike.replit.dev/user/0x1234/nfts")
```

* Đảm bảo **method** đúng (GET/POST).
* Nếu backend prefix `/api`, thì sửa route thành `/api/user/...`.

---

## **3. Nếu bạn dùng CORS (Cross-Origin Resource Sharing)**

* Đảm bảo backend đã mở CORS cho domain frontend (thường là localhost, hoặc domain Vite dev server).
* Trong Express:

```js
import cors from 'cors';
app.use(cors({
  origin: [
    'http://localhost:3000',
    'http://127.0.0.1:5173',
    'https://e7991d75-5935-4129-a804-13e5d957325f-00-61mb5t03trec.pike.replit.dev', // Thêm domain frontend ở đây!
  ]
}));
```

---

## **Tóm tắt các bước nên làm**

1. **Thêm đúng domain backend vào `allowedHosts` của Vite.**
2. **Kiểm tra lại URL API từ frontend – đúng địa chỉ và route backend chưa.**
3. **Mở CORS bên backend cho domain frontend.**
4. **Kiểm tra log backend để biết có đúng đang nhận request từ frontend chưa.**
5. **Nếu backend có route prefix (`/api`), hãy sửa đúng trên frontend.**

---

**Nếu bạn dán code fetch/API call hoặc vite.config.js lên đây, mình sẽ chỉ tận tay chỗ chỉnh nhé!**
Nếu vẫn lỗi, gửi cả log error/server terminal để mình giúp sâu hơn.
